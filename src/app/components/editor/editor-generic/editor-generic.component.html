<div fxLayout="column" fxFlexFill>
  <div fxLayout="row" fxLayoutAlign="start center" class="app-toolbar app-view-metadata app-view-border-bottom" *ngIf="switchable">
    <div fxFlex *ngIf="layout.getNumOfSelected() > 1">
      <div class="app-toolbar-label">
        <span class="app-text">{{ 'editor.children.multiple_selection_label' | translate }}</span>
        <span class="app-pipe"></span>
        <span class="app-text-supplement">{{ ('editor.children.multiple_selection_count' + countPlurals() ) | translate: { count: layout.getNumOfSelected() } }}</span>
      </div>
    </div>
    <div *ngIf="!layout.showPagesEditor()">
      <button mat-icon-button [matTooltip]="'editor.toolbar.editor_metadata' | translate" [matTooltipPosition]="toolbarTooltipPosition" [class.app-active]="editorType === 'metadata'" (click)="editorType = 'metadata'">
        <span class="app-text-icon">M</span>
      </button>
      <button mat-icon-button *ngIf="layout.lastSelectedItem && layout.lastSelectedItem.isPage()" [matTooltip]="'editor.toolbar.editor_image' | translate" [matTooltipPosition]="toolbarTooltipPosition" [class.app-active]="editorType === 'image'" (click)="editorType = 'image'">
        <mat-icon>image</mat-icon>
      </button>
      <button mat-icon-button *ngIf="layout.lastSelectedItem && layout.lastSelectedItem.isAudioPage()" [matTooltip]="'editor.toolbar.editor_song' | translate" [matTooltipPosition]="toolbarTooltipPosition" [class.app-active]="editorType === 'song'" (click)="editorType = 'song'">
        <mat-icon>audiotrack</mat-icon>
      </button>
      <button mat-icon-button *ngIf="layout.lastSelectedItem && layout.lastSelectedItem.canContainPdf()" [matTooltip]="'editor.toolbar.editor_pdf' | translate" [matTooltipPosition]="toolbarTooltipPosition" [class.app-active]="editorType === 'pdf'" (click)="editorType = 'pdf'">
        <mat-icon>picture_as_pdf</mat-icon>
      </button>
      <button mat-icon-button [matTooltip]="'editor.toolbar.editor_mods' | translate" [matTooltipPosition]="toolbarTooltipPosition" [class.app-active]="editorType === 'mods'" (click)="editorType = 'mods'">
        <mat-icon>code</mat-icon>
      </button>
      <button mat-icon-button *ngIf="layout.lastSelectedItem && layout.lastSelectedItem.isPage()" [matTooltip]="'editor.toolbar.editor_ocr' | translate" [matTooltipPosition]="toolbarTooltipPosition" [class.app-active]="editorType === 'ocr'" (click)="editorType = 'ocr'">
        <mat-icon>title</mat-icon>
      </button>
      <button mat-icon-button [matTooltip]="'editor.toolbar.editor_atm' | translate" [matTooltipPosition]="toolbarTooltipPosition" [class.app-active]="editorType === 'atm'" (click)="editorType = 'atm'">
        <mat-icon>scanner</mat-icon>
      </button>
      <button mat-icon-button *ngIf="config.showCommentEditor" [matTooltip]="'editor.toolbar.editor_comment' | translate" [matTooltipPosition]="toolbarTooltipPosition" [class.app-active]="editorType === 'comment'" (click)="editorType = 'comment'">
        <mat-icon>format_quote</mat-icon>
      </button>
    </div>
  </div>
  <div fxFlex [ngSwitch]="editorType">
    <div class="app-editor-content app-tree"  *ngSwitchCase="'tree'">
      <app-editor-tree ></app-editor-tree>
    </div>
    <app-editor-structure *ngSwitchCase="'structure-list'" [viewMode]="'list'" [panel]="panel" (onIngest)="passOnIngest()"></app-editor-structure>
    <app-editor-structure *ngSwitchCase="'structure-grid'" [viewMode]="'grid'" [panel]="panel" (onIngest)="passOnIngest()"></app-editor-structure>
    <app-editor-structure *ngSwitchCase="'structure-icons'" [viewMode]="'icons'" [panel]="panel" (onIngest)="passOnIngest()"></app-editor-structure>
    <ng-container *ngSwitchCase="'image'" >
      <app-viewer *ngIf="layout.lastSelectedItem && layout.lastSelectedItem.isPage()" [pid]="layout.lastSelectedItem.pid" ></app-viewer>
      <div *ngIf="!(layout.lastSelectedItem && layout.lastSelectedItem.isPage())">{{'Image not available' | translate}}</div>
    </ng-container>
    <ng-container *ngSwitchCase="'media'" >
      <app-media *ngIf="layout.lastSelectedItem" [pid]="layout.lastSelectedItem.pid"></app-media>
    </ng-container>
    <ng-container *ngSwitchCase="'pdf'" >
      <app-pdf *ngIf="layout.lastSelectedItem" [pid]="layout.lastSelectedItem.pid"></app-pdf>
    </ng-container>
    <ng-container *ngSwitchCase="'song'" >
      <app-song *ngIf="layout.lastSelectedItem" [pid]="layout.lastSelectedItem.pid"></app-song>
    </ng-container>
    <ng-container *ngIf="layout.lastSelectedItem">
      <app-editor-mods *ngSwitchCase="'mods'"  [pid]="layout.lastSelectedItem.pid"></app-editor-mods>
      <app-editor-ocr *ngSwitchCase="'ocr'"  [pid]="layout.lastSelectedItem.pid"></app-editor-ocr>
      <app-editor-comment *ngSwitchCase="'comment'"  [pid]="layout.lastSelectedItem.pid"></app-editor-comment>
      <app-editor-atm *ngSwitchCase="'atm'"  [pid]="layout.lastSelectedItem.pid"></app-editor-atm>
      <app-editor-premis *ngSwitchCase="'premis'"  [pid]="layout.lastSelectedItem.pid"></app-editor-premis>
    </ng-container>
    <ng-container *ngSwitchCase="'metadata'">
      <app-editor-pages *ngIf="layout.showPagesEditor()"></app-editor-pages>
      <app-editor-audioPages *ngIf="layout.showAudioPagesEditor()"></app-editor-audioPages>
      <ng-container *ngIf="layout.lastSelectedItem && !layout.showPagesEditor() && !layout.showAudioPagesEditor()">
        <app-editor-page *ngIf="layout.lastSelectedItem.isPage()" [model]="layout.lastSelectedItem.model" [pid]="layout.lastSelectedItem.pid" > </app-editor-page>
        <app-editor-audioPage *ngIf="layout.lastSelectedItem.isAudioPage()" [model]="layout.lastSelectedItem.model" [pid]="layout.lastSelectedItem.pid"> </app-editor-audioPage>
        <!-- <app-editor-chronicle *ngIf="layout.lastSelectedItem.isChronicle()" [pid]="layout.lastSelectedItem.pid" 
        [metadata]="layout.lastSelectedItemMetadata" [model]="layout.lastSelectedItem.model"></app-editor-chronicle> -->
        <!-- <app-editor-bdm *ngIf="layout.lastSelectedItem.isBdm()" 
          [model]="layout.lastSelectedItem.model" [metadata]="layout.lastSelectedItemMetadata"></app-editor-bdm> -->
        <app-editor-metadata *ngIf="!layout.lastSelectedItem.isPage() && !layout.lastSelectedItem.isAudioPage()" 
          [metadata]="layout.lastSelectedItemMetadata" [model]="layout.lastSelectedItem.model">
        </app-editor-metadata>
      </ng-container>
    </ng-container>
    <!-- <app-editor-geo *ngSwitchCase="'geo'" [pid]="layout.lastSelectedItem.pid"></app-editor-geo> -->
  </div>
</div>