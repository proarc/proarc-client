<table mat-table #table #childrenList [dataSource]="items()" matSort
  class="app-dragable-table app-striped app-hover app-resize" [matSortActive]="sortField"
  [matSortDirection]="sortAsc ? 'asc' : 'desc'" (matSortChange)="sortTable($event)" cdkDropList
  (cdkDropListDropped)="drop($event)" cdkDropListData="items()">

  <ng-container *ngFor="let c of selectedColumns; let idx = index; let last = last;" [matColumnDef]="c.field">
    <th mat-header-cell *matHeaderCellDef [resizeColumn]="true" (columnResized)="saveColumnsSizes($event,c.field)"
      [style.width]="c.width + 'px'">
      <span *ngIf="c.field !== 'isLocked'" mat-sort-header>{{'search.' + c.field | translate}}</span>
      <button *ngIf="last" (click)="setColumns()" mat-icon-button [matTooltip]="'editor.children.select_columns' | translate">
        <mat-icon>more_horiz</mat-icon>
      </button>
    </th>
    <td mat-cell *matCellDef="let element">
      <ng-container [ngSwitch]="c.type">
        <ng-container *ngSwitchCase="'date'">
          {{ element[c.field] | date : 'dd.MM.yyyy hh:mm:ss'}}
        </ng-container>
        <ng-container *ngSwitchCase="'list'">
          {{ listValue(c.field, element[c.field])}}
        </ng-container>
        <ng-container *ngSwitchCase="'translated'">
          {{ prefixes[c.field] + element[c.field] | translate }}
        </ng-container>
        <ng-container *ngSwitchCase="'boolean'">
          <mat-icon [matTooltip]="element.isLocked ? ('desc.locked' | translate) : ('desc.unlocked' | translate)">{{
            element.isLocked ? 'lock' : 'lock_open' }}</mat-icon>
          &#160;
          <a *ngIf="element.validationStatus === 'ERROR'" (click)="onGetValidationError(element.validationProcess);"
            [matTooltip]="'button.viewErrorDetail' | translate" matTooltipPosition="below" class="app-icon-button">
            <mat-icon>error_outline</mat-icon>
          </a>
        </ng-container>
        <ng-container *ngSwitchDefault>
          <ng-container *ngIf="c.field !== 'validationStatus'">
            <a *ngIf="c.field === 'pid'" class="app-icon-copy app-mr-1" (click)="ui.copyTextToClipboard(element.pid)"
              [matTooltip]="'button.copyTextToClipboard' | translate"><mat-icon
                class="app-icon-copy">content_copy</mat-icon></a>
            {{ element[c.field] }}
          </ng-container>
        </ng-container>
      </ng-container>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns; let idx=index" #matrow [id]="'tr_'+row.pid"
    (click)="onSelectItem(row, $event, idx)" (dblclick)="onOpenItem(row, $event)" class="app-cursor-pointer"
    [class.app-selected]="row.selected" [class.app-invalid]="row.invalid"
    [class.app-repre]="row.pageRepre === 'reprePage'"
    [title]="row.label + ' (' + ('model.' + row.model | translate) + ')'" cdkDrag [cdkDragData]="row"
    [cdkDragDisabled]="!draggable()" [cdkDragPreviewContainer]="'parent'"></tr>


</table>