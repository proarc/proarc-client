<app-editor-field [field]="field" [title]="'editor.author.title'" [usage]="data.usage" [help]="data.help">
  
  <ng-template let-item="item" #templateMenu>
      <div class="app-header-divider"></div>

      <button (click)="onLoadFromCatalog(item)" [matTooltip]="'editor.metadata.catalog' | translate" mat-icon-button>
        <mat-icon>local_library</mat-icon>
      </button>

      <button [disabled]="!item.canSplitName()" matTooltip="{{ 'editor.author.split_btn' | translate }}" (click)="item.splitName()" mat-icon-button>
        <mat-icon>play_for_work</mat-icon>
      </button>

      <button matTooltip="{{ 'editor.author.' + (item.isPrimary() ? 'unset_primary' : 'set_primary') | translate }}" [color]="item.isPrimary() ? 'primary' : ''" (click)="item.switchPrimary()" mat-icon-button>
        <mat-icon>{{ item.isPrimary() ? 'star' : 'star_outline' }}</mat-icon>
      </button>

      <ng-container *ngIf="item.nameIdentifier">
        <div class="app-header-divider"></div>
        <div class="app-header-text">{{ item.nameIdentifier }}</div>
      </ng-container>
  </ng-template>

  <ng-template let-item="item" #templateContent>

    <mat-form-field class="app-full-width">
      <span class="app-usage">{{ data.name.usage }}</span>
      <input autocomplete="off" matInput [(ngModel)]='item.name["_"]' placeholder="{{ 'editor.author.name' | translate }}">
    </mat-form-field>

    <div>
      <mat-form-field class="app-half-left">
        <span class="app-usage">{{ data.given.usage }}</span>
        <input autocomplete="off" matInput [(ngModel)]='item.given["_"]' placeholder="{{ 'editor.author.given' | translate }}">
      </mat-form-field>

      <mat-form-field class="app-half-right">
        <span class="app-usage">{{ data.family.usage }}</span>
        <input autocomplete="off" matInput [(ngModel)]='item.family["_"]' placeholder="{{ 'editor.author.family' | translate }}">
      </mat-form-field>
    </div>

    <div>
      <mat-form-field class="app-half-left">
        <span class="app-usage">{{ data.date.usage }}</span>
        <input autocomplete="off" matInput [(ngModel)]='item.date["_"]' placeholder="{{ 'editor.author.date' | translate }}">
      </mat-form-field>
      <mat-form-field class="app-half-right">
        <span class="app-usage">{{ data.type.usage }}</span>
        <mat-select [(ngModel)]='item.attrs["type"]' placeholder="{{ 'editor.author.type' | translate }}">
          <mat-option value="">-</mat-option>
          <mat-option *ngFor="let type of nameTypes" [value]="type">
            {{ ('name.' + type ) | translate }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <app-editor-field [field]="item.roles" [title]="'editor.author.role.title'" class="app-roles" [nested]='true' [usage]="data.role.usage">
      <ng-template let-role="item" #templateContent>
        <mat-select class="app-no-placeholder" [(ngModel)]='role.role["_"]' placeholder="{{ 'editor.author.role.title' | translate }}">
          <mat-option *ngFor="let role of roles" [value]="role.code">
            {{ role.name }}
          </mat-option>
        </mat-select>
      </ng-template>
    </app-editor-field>

  </ng-template>
</app-editor-field>

    

