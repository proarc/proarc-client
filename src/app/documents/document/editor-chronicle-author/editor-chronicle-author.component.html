<div class="editor">

<div class="app-card" *ngFor="let item of field.items; index as index; last as last; first as first;">
    <div class="app-card-header">
      <span class="app-card-title">{{ 'editor.chronicle.author.label' | translate }}</span>
  
     <button matTooltip="{{ 'common.remove' | translate }}" color="primary" (click)="field.remove(index)" mat-icon-button>
       <mat-icon>delete</mat-icon>
     </button>
  
     <button [disabled]="last" matTooltip="{{ 'common.move_down' | translate }}" color="primary" (click)="field.moveDown(index)" mat-icon-button>
       <mat-icon>arrow_drop_down</mat-icon>
     </button>
     <button [disabled]="first" matTooltip="{{ 'common.move_up' | translate }}" color="primary" (click)="field.moveUp(index)" mat-icon-button>
       <mat-icon>arrow_drop_up</mat-icon>
     </button>

     <button class="app-collapse" *ngIf="item.collapsed" matTooltip="{{ 'common.expand' | translate }}" color="primary" (click)="item.switchCollapsed()" mat-icon-button>
        <mat-icon>expand_more</mat-icon>
      </button>
      <button class="app-collapse" *ngIf="!item.collapsed" matTooltip="{{ 'common.collapse' | translate }}" color="primary" (click)="item.switchCollapsed()" mat-icon-button>
        <mat-icon>expand_less</mat-icon>
      </button>
  
     <button matTooltip="{{ 'editor.add_field' | translate }}" color="primary" (click)="field.addAfter(index)" mat-icon-button>
        <mat-icon>add</mat-icon>
      </button>
      
    </div>

    <div class="app-card-content" [class.app-collapsed]="item.collapsed">

      <div>
        <mat-form-field class="app-half-left">
          <input autocomplete="off" matInput [(ngModel)]='item.given["_"]' placeholder="{{ 'editor.chronicle.author.given' | translate }}">
        </mat-form-field>

        <mat-form-field class="app-half-right">
          <input autocomplete="off" matInput [(ngModel)]='item.family["_"]' placeholder="{{ 'editor.chronicle.author.family' | translate }}">
        </mat-form-field>
      </div>

      <div>
        <mat-form-field class="app-full-width">
          <input autocomplete="off" matInput [(ngModel)]='item.date["_"]' placeholder="{{ 'editor.chronicle.author.date' | translate }}">
        </mat-form-field>
    </div>

           <div class="app-card app-author-roles" *ngFor="let role of item.roles.items; index as indexRole; last as lastRole; first as firstRole;">
              <div class="app-card-header">
                <span class="app-card-title app-no-collapse">{{ 'editor.author.role.role' | translate }}</span>
                <button matTooltip="{{ 'common.remove' | translate }}" color="primary" (click)="item.roles.removeItem(role)" mat-icon-button>
                  <mat-icon>delete</mat-icon>
                </button>
                <button [disabled]="last" matTooltip="{{ 'common.move_down' | translate }}" color="primary" (click)="item.roles.moveDown(index)" mat-icon-button>
                  <mat-icon>arrow_drop_down</mat-icon>
                </button>
                <button [disabled]="first" matTooltip="{{ 'common.move_up' | translate }}" color="primary" (click)="item.roles.moveUp(index)" mat-icon-button>
                  <mat-icon>arrow_drop_up</mat-icon>
                </button>
                <button matTooltip="{{ 'common.add' | translate }}" color="primary" (click)="item.roles.addAfter(indexRole)" mat-icon-button>
                  <mat-icon>add</mat-icon>
                </button>
              </div>
              <div class="app-card-content" >
                <mat-select class="app-no-placeholder" [(ngModel)]='role.role["_"]' placeholder="{{ 'editor.author.role.role' | translate }}">
                  <mat-option *ngFor="let role of roles" [value]="role.code">
                    {{ role.name }}
                  </mat-option>
                </mat-select>
              </div>
            </div>




          
            </div>
















    </div>

  </div>
  
  
    