<h1 mat-dialog-title>{{ 'editor.children.markSequence' | translate }}</h1>

<div mat-dialog-content style="height:100%;display: flex;flex-direction: row;">
  <div fxFlex class="app-mark">
    <as-split direction="horizontal" [disabled]="false">
      <as-split-area [size]="40" (resized)="onResized($event, 'orig')">
        <div>Vyberte zdroje </div>

        <div class="app-view-icons" *ngIf="data.viewMode == 'icons'" #childrenIconList>
          <div *ngFor="let item of orig; let i = index" class="app-item" (click)="select(item, i, $event)"
            [class.app-selected]="item.selected" [style.width]="data.iconWidth['orig'] + '%'"
            [style.height]="data.iconHeight['orig'] + 'px'">
            <div class="app-item-content">
              <div class="app-item-thumb" [style.backgroundImage]="'url(' + thumb(item.pid) + ')'"></div>
              <div class="app-item-label">{{ item.label + (data.shortLabels ? "" : (", " + ("page_type." + item.pageType
                | translate))) }}</div>
            </div>
          </div>
        </div>

        <div class="app-view-grid" *ngIf="data.viewMode == 'grid'" #childrenGridList >
          <div *ngFor="let item of orig; let i = index" (click)="select(item, i, $event)" 
            class="app-grid-item-wrapper" 
            [class.app-selected]="item.selected"
            [title]="item.label + ' (' + ('model.' + item.model | translate) + ')'" [style.width]="data.iconWidth['orig'] + '%'">
            <div class="app-grid-item">
              <div class="app-grid-item-label">{{ data.shortLabels ? item.shortLabel : item.label }}
                <br />
                ({{ (item.pageType ? "page_type." + item.pageType : "model." + item.model) | translate }})
              </div>
            </div>
          </div>
        </div>

        <table mat-table *ngIf="data.viewMode == 'list'" [dataSource]="origTable" class="mat-elevation-z8" #table>
          <ng-container matColumnDef="pid">
            <th mat-header-cell *matHeaderCellDef>{{'search.pid' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.pid}} </td>
          </ng-container>
  
          <ng-container matColumnDef="label">
            <th mat-header-cell *matHeaderCellDef> {{'search.name' | translate}}</th>
            <td mat-cell *matCellDef="let element"> {{data.shortLabels ? element.shortLabel : element.label}} </td>
          </ng-container>
  
          <ng-container matColumnDef="pageType">
            <th mat-header-cell *matHeaderCellDef> {{'search.pageType' | translate}}</th>
            <td mat-cell *matCellDef="let element"> {{element.pageType}} </td>
          </ng-container>
  
          <ng-container matColumnDef="model">
            <th mat-header-cell *matHeaderCellDef> {{'search.model' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{ 'model.' + element.model | translate}} </td>
          </ng-container>
  
          <ng-container matColumnDef="owner">
            <th mat-header-cell *matHeaderCellDef> {{'search.owner' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.owner}} </td>
          </ng-container>
  
          <ng-container matColumnDef="created">
            <th mat-header-cell *matHeaderCellDef> {{'search.created' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.created | date : 'dd.MM.yyyy'}} </td>
          </ng-container>
  
          <ng-container matColumnDef="modified">
            <th mat-header-cell *matHeaderCellDef> {{'search.modified' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.modified | date : 'dd.MM.yyyy'}} </td>
          </ng-container>
  
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> {{'search.status' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.status}} </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="data.displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; let idx = index; columns: data.displayedColumns" [class.selected]="row.selected" 
              (click)="select(row, idx, $event)" 
              ></tr>
        </table>

      </as-split-area>
      <as-split-area [size]="40" (resized)="onResized($event, 'dest')">
        <div>Vyberte cíle</div>

        <div class="app-view-icons" *ngIf="data.viewMode == 'icons'" #childrenIconList>
          <div *ngFor="let item of dest; let i = index" class="app-item" (click)="select(item, i, $event)"
            [class.app-selected]="item.selected" [style.width]="data.iconWidth['dest'] + '%'"
            [style.height]="data.iconHeight['dest'] + 'px'">
            <div class="app-item-content">
              <div class="app-item-thumb" [style.backgroundImage]="'url(' + thumb(item.pid) + ')'"></div>
              <div class="app-item-label">{{ item.label + (data.shortLabels ? "" : (", " + ("page_type." + item.pageType
                | translate))) }}</div>
            </div>
          </div>
        </div>

        <div class="app-view-grid" *ngIf="data.viewMode == 'grid'" #childrenGridList >
          <div *ngFor="let item of dest; let i = index" (click)="select(item, i, $event)" 
            class="app-grid-item-wrapper" 
            [class.app-selected]="item.selected"
            [title]="item.label + ' (' + ('model.' + item.model | translate) + ')'" [style.width]="data.iconWidth['dest'] + '%'">
            <div class="app-grid-item">
              <div class="app-grid-item-label">{{ data.shortLabels ? item.shortLabel : item.label }}
                <br />
                ({{ (item.pageType ? "page_type." + item.pageType : "model." + item.model) | translate }})
              </div>
            </div>
          </div>
        </div>

        <table mat-table *ngIf="data.viewMode == 'list'" [dataSource]="destTable" class="mat-elevation-z8" #table>
          <ng-container matColumnDef="pid">
            <th mat-header-cell *matHeaderCellDef>{{'search.pid' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.pid}} </td>
          </ng-container>
  
          <ng-container matColumnDef="label">
            <th mat-header-cell *matHeaderCellDef> {{'search.name' | translate}}</th>
            <td mat-cell *matCellDef="let element"> {{data.shortLabels ? element.shortLabel : element.label}} </td>
          </ng-container>
  
          <ng-container matColumnDef="pageType">
            <th mat-header-cell *matHeaderCellDef> {{'search.pageType' | translate}}</th>
            <td mat-cell *matCellDef="let element"> {{element.pageType}} </td>
          </ng-container>
  
          <ng-container matColumnDef="model">
            <th mat-header-cell *matHeaderCellDef> {{'search.model' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{ 'model.' + element.model | translate}} </td>
          </ng-container>
  
          <ng-container matColumnDef="owner">
            <th mat-header-cell *matHeaderCellDef> {{'search.owner' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.owner}} </td>
          </ng-container>
  
          <ng-container matColumnDef="created">
            <th mat-header-cell *matHeaderCellDef> {{'search.created' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.created | date : 'dd.MM.yyyy'}} </td>
          </ng-container>
  
          <ng-container matColumnDef="modified">
            <th mat-header-cell *matHeaderCellDef> {{'search.modified' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.modified | date : 'dd.MM.yyyy'}} </td>
          </ng-container>
  
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> {{'search.status' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{element.status}} </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="data.displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; let idx = index; columns: data.displayedColumns" [class.selected]="row.selected" 
              (click)="select(row, idx, $event)" 
              ></tr>
        </table>


      </as-split-area>
      <as-split-area [size]="20">
        <div>Vyberte pole kam se to kopiruje</div>
        <div>
          <mat-checkbox color="primary" [(ngModel)]="pageType">Editovat typ stran</mat-checkbox>
        </div>
        <div>
          <mat-checkbox color="primary" [(ngModel)]="pageIndex">Editovat index stran</mat-checkbox>
        </div>
        <div>
          <mat-checkbox color="primary" [(ngModel)]="pageNumber">Editovat čísla stran</mat-checkbox>
        </div>
      </as-split-area>
    </as-split>
  </div>
</div>
<div mat-dialog-actions cdk-focus-start>
  <button (click)="save()" mat-raised-button color="primary" [matTooltip]="'button.save' | translate">{{ 'button.save' |
    translate }}</button>
    <button mat-raised-button color="default" mat-dialog-close="close" >{{ 'common.close' | translate }}</button>
</div>