<div fxLayout="column" fxFlexFill>
  <div fxLayout="row" fxLayoutAlign="start center" class="app-breadcrumbsbar">
    <div fxLayout="row" fxLayoutAlign="start center" class="app-breadcrumbs">
      <a routerLink="/"><mat-icon>home</mat-icon></a>
      <span class="app-separator">/</span>
      <a routerLink="/devices">{{ 'device.devices' | translate }}</a>
      <span class="app-separator">/</span>
      <span class="app-last">{{ device.label }}</span>
    </div>
  </div>

  <mat-progress-bar mode="indeterminate" *ngIf="state=='loading'" class="app-progress-bar"></mat-progress-bar>

  <div fxFlex class="app-device app-p-4 app-oa-y" fxLayout="column">
    <mat-card *ngIf="state === 'success'">
      <mat-card-content>
        <fieldset class="app-p-4 app-mb-4">
          <legend>{{ 'device.general' | translate }}</legend>
          <div fxLayout="row" fxLayoutGap="16px">
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.name' | translate" disabled [(ngModel)]='device.label'>
            </mat-form-field>
          </div>
          <div fxLayout="row" fxLayoutGap="16px">
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.imageProducer' | translate" disabled [(ngModel)]='device.imageProducer'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.captureDevice' | translate" disabled [(ngModel)]='device.captureDevice'>
            </mat-form-field>
          </div>
        </fieldset>

        <fieldset class="app-p-4 app-mb-4">
          <legend>{{ 'device.scanner' | translate }}</legend>
          <div fxLayout="row" fxLayoutGap="16px">
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.manufacturer' | translate" disabled [(ngModel)]='device.scannerManufacturer'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.scannerSensor' | translate" disabled [(ngModel)]='device.scannerSensor'>
            </mat-form-field>
          </div>

          <div fxLayout="row" fxLayoutGap="16px">
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.modelName' | translate" disabled [(ngModel)]='device.scannerModelName'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.modelNumber' | translate" disabled [(ngModel)]='device.scannerModelNumber'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.modelSerialNumber' | translate" disabled [(ngModel)]='device.scannerModelSerialNo'>
            </mat-form-field>
          </div>
          <div fxLayout="row" fxLayoutGap="16px">
            <mat-form-field fxFlex>
              <input type="number" step="1" matInput [placeholder]="'X - ' + ('device.opticalResolution' | translate)" disabled [(ngModel)]='device.xOpticalResolution'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="number" step="1" matInput [placeholder]="'Y - ' + ('device.opticalResolution' | translate)" disabled [(ngModel)]='device.yOpticalResolution'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.opticalResolutionUnit' | translate" disabled [(ngModel)]='device.opticalResolutionUnit'>
            </mat-form-field>
          </div>
          <div fxLayout="row" fxLayoutGap="16px">
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.softwareName' | translate" disabled [(ngModel)]='device.scanningSoftwareName'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.softwareVersion' | translate" disabled [(ngModel)]='device.scanningSoftwareVersionNo'>
            </mat-form-field>
          </div>
        </fieldset>

        <fieldset class="app-p-4 app-mb-4">
          <legend>{{ 'device.digitalCamera' | translate }}</legend>
          <div fxLayout="row" fxLayoutGap="16px">
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.manufacturer' | translate" disabled [(ngModel)]='device.digitalCameraManufacturer'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.cameraSensor' | translate" disabled [(ngModel)]='device.cameraSensor'>
            </mat-form-field>
          </div>
          <div fxLayout="row" fxLayoutGap="16px">
            <mat-form-field fxFlex>
              <input type="text" matInput [placeholder]="'device.modelName' | translate" disabled [(ngModel)]='device.digitalCameraModelName'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="text" matInput autocomplete="off" [placeholder]="'device.modelNumber' | translate" disabled [(ngModel)]='device.digitalCameraModelNumber'>
            </mat-form-field>
            <mat-form-field fxFlex>
              <input type="text" matInput autocomplete="off" [placeholder]="'device.modelSerialNumber' | translate" disabled [(ngModel)]='device.digitalCameraModelSerialNo'>
            </mat-form-field>
          </div>
        </fieldset>

        <fieldset class="app-p-4 app-mb-4" *ngIf="device.isAudio()">
          <legend>{{ 'device.informationAboutAudioFiles' | translate }}</legend>
          <div class="app-border-wrapper">
            <table mat-table [dataSource]="device.audioDevices" class="app-hover app-striped">
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>{{ 'device.name' | translate }}</th>
                <td mat-cell *matCellDef="let element">{{ element.name }}</td>
              </ng-container>
  
              <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef>{{ 'device.type' | translate }}</th>
                <td mat-cell *matCellDef="let element">{{ element.type }}</td>
              </ng-container>
  
              <ng-container matColumnDef="manufacturer">
                <th mat-header-cell *matHeaderCellDef>{{ 'device.manufacturer' | translate }}</th>
                <td mat-cell *matCellDef="let element">{{ element.manufacturer }}</td>
              </ng-container>
  
              <ng-container matColumnDef="serialNumber">
                <th mat-header-cell *matHeaderCellDef>{{ 'device.serialNumber' | translate }}</th>
                <td mat-cell *matCellDef="let element">{{ element.serialNumber }}</td>
              </ng-container>
  
              <ng-container matColumnDef="settings">
                <th mat-header-cell *matHeaderCellDef>{{ 'device.settings' | translate }}</th>
                <td mat-cell *matCellDef="let element">{{ element.settings }}</td>
              </ng-container>
  
              <ng-container matColumnDef="identifierType">
                <th mat-header-cell *matHeaderCellDef>{{ 'device.identifierType' | translate }}</th>
                <td mat-cell *matCellDef="let element">{{ element.identifierType }}</td>
              </ng-container>
  
              <ng-container matColumnDef="identifierValue">
                <th mat-header-cell *matHeaderCellDef>{{ 'device.identifierValue' | translate }}</th>
                <td mat-cell *matCellDef="let element">{{ element.identifierValue }}</td>
              </ng-container>
  
              <ng-container matColumnDef="identifierRole">
                <th mat-header-cell *matHeaderCellDef>{{ 'device.identifierRole' | translate }}</th>
                <td mat-cell *matCellDef="let element">{{ element.identifierRole }}</td>
              </ng-container>
  
              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let element; let i = index">
                  <a (click)="removeAudioDevice(i)" [matTooltip]="'device.button.deleteInfoForAudioFiles' | translate" matTooltipPosition="below" class="app-icon-button app-color-warn">
                    <mat-icon>delete</mat-icon>
                  </a>
                  <a [routerLink]="['/devices', device.id, 'audio', i + 1, 'edit']"  [matTooltip]="'device.button.editInfoForAudioFiles' | translate" matTooltipPosition="below" class="app-icon-button">
                    <mat-icon>edit</mat-icon>
                  </a>
                </td>
              </ng-container>
  
              <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          </div>
        </fieldset>

        <button mat-stroked-button [routerLink]="['/devices', device.id, 'edit']" class="app-mr-2">
          {{ 'device.button.editDevice' | translate }}
        </button>
        <button mat-flat-button color="warn" (click)="removeDevice()" class="app-mr-2">
          {{ 'device.button.removeDevice' | translate }}
        </button>
        <button mat-stroked-button *ngIf="device.isAudio()" [routerLink]="['/devices', device.id, 'audio', 'new']">
          {{ 'device.button.addInfoToAudioFiles' | translate }}
        </button>
      </mat-card-content>
    </mat-card>
  </div>
</div>
