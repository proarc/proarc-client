<div class="explanations">
  <p>
    Toggle areas visibility using following buttons:
  </p>
  <ng-template ngFor let-c [ngForOf]="config.columns">
    <ng-template ngFor let-r [ngForOf]="c.rows">
      <button
        *ngIf="r.type !== 'doc'"
        (click)="r.visible = !r.visible; refreshColumnVisibility()"
        class="btn btn-warning"
        [class.active]="r.visible"
      >
        {{ r.type }}
      </button>
    </ng-template>
  </ng-template>
  <!-- <br />
  <button class="btn btn-warning" [class.active]="!config.disabled" (click)="toggleDisabled()">
    {{ 'isDisabled: ' + config.disabled }}
  </button> -->
  <!-- <br />
  <button (click)="resetConfig()" class="btn btn-warning">Reset localStorage</button> -->
</div>

<as-split *ngIf="config" direction="horizontal" [disabled]="config.disabled" (dragEnd)="onDragEnd(-1, $event)"> 
  <ng-template ngFor let-column [ngForOf]="config.columns" let-icol="index">
    <as-split-area *ngIf="column.visible" [order]="icol" [size]="column.size">
      <as-split direction="vertical" [disabled]="config.disabled" (dragEnd)="onDragEnd(icol, $event)">
        <ng-template ngFor let-row [ngForOf]="column.rows" let-irow="index">
          <as-split-area *ngIf="row.visible" [order]="irow" [size]="row.size">
            <div class="bloc">
              <mat-form-field appearance="fill">
                <mat-label>Panel type</mat-label>
                <mat-select [(ngModel)]="row.type" (selectionChange)="refreshColumnVisibility()">
                  <mat-option *ngFor="let type of types" [value]="type">
                    {{type}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <div class="panel">
                <p>{{ row.type }}</p>
              </div>
              
            </div>
          </as-split-area>
        </ng-template>
      </as-split>
    </as-split-area>
  </ng-template>
</as-split>